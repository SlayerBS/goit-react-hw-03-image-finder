{"version":3,"sources":["components/Searchbar/SearchBar.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","App.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","api/api.js","components/Loader/Loader.js","components/Modal/Modal.js","App.js","index.js"],"names":["module","exports","SearchBar","state","value","handleChange","evt","setState","target","toLowerCase","console","log","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","styles","Searchbar","SearchForm","this","type","autoComplete","autoFocus","placeholder","onChange","Component","protoType","PropTypes","func","isRequired","ImageGalleryItem","imageSrc","openModalImage","src","alt","onClick","ImageGallery","images","modalImage","map","id","webformatURL","largeImageURL","Button","axios","defaults","baseURL","getImagesByQuery","searchQuery","currentPage","options","url","then","data","hits","LoaderSpiner","Loader","color","height","width","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","page","showModal","isLoading","showButton","getImages","length","prevState","catch","finally","scrollDown","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","prevProps","autoClose","position","Error","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d687dfc5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__1kVwW\",\"SearchForm\":\"SearchBar_SearchForm__3HYhi\",\"SearchForm-button\":\"SearchBar_SearchForm-button__2O2F9\",\"SearchForm-button-label\":\"SearchBar_SearchForm-button-label__3pUHz\",\"SearchForm-input\":\"SearchBar_SearchForm-input__1YBJ8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1OHvA\",\"ImageGalleryItem-image\":\"ImageGalleryItem_ImageGalleryItem-image__1Q_9s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1IQID\",\"Modal\":\"Modal_Modal__1wBqd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3nfF4\",\"Error\":\"App_Error__3llr9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1vX9v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__lvLUS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__114M4\"};","import React, { Component } from \"react\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport styles from \"./SearchBar.module.css\";\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    value: \"\",\r\n  };\r\n  handleChange = (evt) => {\r\n    this.setState({ value: evt.target.value.toLowerCase() });\r\n    console.log(evt.target.value);\r\n  };\r\n\r\n  handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    if (this.state.value.trim() === \"\") {\r\n      toast.error(\"Введите поисковый запрос\");\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.value);\r\n    this.setState({ value: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles[\"SearchForm-button\"]}>\r\n            <span className={styles[\"SearchForm-button-label\"]}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles[\"SearchForm-input\"]}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n            value={this.state.value}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchBar.protoType = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SearchBar;\r\n","import PropTypes from \"prop-types\";\r\n\r\nimport styles from \"./ImageGalleryItem.module.css\";\r\n\r\nconst ImageGalleryItem = ({ imageSrc, openModalImage }) => {\r\n  return (\r\n    <li className={styles.ImageGalleryItem}>\r\n      <img\r\n        src={imageSrc}\r\n        alt=\"\"\r\n        className={styles[\"ImageGalleryItem-image\"]}\r\n        onClick={openModalImage}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  imageSrc: PropTypes.string.isRequired,\r\n  openModalImage: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\n\r\nimport styles from \"./ImageGallery.module.css\";\r\n\r\nconst ImageGallery = ({ images, modalImage }) => {\r\n  return (\r\n    <ul className={styles.ImageGallery}>\r\n      {images.map(({ id, webformatURL, largeImageURL }) => {\r\n        const openModalImage = () => modalImage(largeImageURL);\r\n        return (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            imageSrc={webformatURL}\r\n            openModalImage={openModalImage}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n  modalImage: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import PropTypes from \"prop-types\";\r\nimport styles from \"./Button.module.css\";\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button onClick={onClick} className={styles.Button}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import axios from \"axios\";\r\n\r\nconst API_KEY = \"4423902-dbd0f970c0cc60dbb84d66d4b\";\r\naxios.defaults.baseURL = \"https://pixabay.com/api\";\r\n\r\nconst getImagesByQuery = (searchQuery, currentPage) => {\r\n  const options = {\r\n    url: `/?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${currentPage}&per_page=12&key=${API_KEY}`,\r\n  };\r\n\r\n  return axios(options).then(({ data }) => data.hits);\r\n};\r\n\r\nexport { getImagesByQuery };\r\n","import Loader from \"react-loader-spinner\";\r\n\r\nimport styles from \"./Loader.module.css\";\r\n\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n\r\nconst LoaderSpiner = () => {\r\n  return (\r\n    <div className={styles.Loader}>\r\n      <Loader type=\"ThreeDots\" color=\"#3f51b5\" height={80} width={80} />;\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoaderSpiner;\r\n","import PropTypes from \"prop-types\";\r\nimport React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nimport styles from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={styles.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={styles.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func,\r\n};\r\n\r\nexport default Modal;\r\n","import React, { Component } from \"react\";\nimport SearchBar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Button from \"./components/Button\";\nimport { getImagesByQuery } from \"./api/api\";\nimport LoaderSpiner from \"./components/Loader\";\nimport Modal from \"./components/Modal\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport styles from \"./App.module.css\";\n\nexport default class App extends Component {\n  state = {\n    images: [],\n    searchQuery: \"\",\n    page: 1,\n    showModal: false,\n    isLoading: false,\n    largeImageURL: \"\",\n    showButton: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.searchQuery;\n    const nextQuery = this.state.searchQuery;\n    if (prevQuery !== nextQuery) {\n      this.getImages();\n    }\n\n    if (this.state.images.length - prevState.images.length === 12) {\n      this.setState({ showButton: true });\n    }\n  }\n\n  onSubmit = (searchQuery) =>\n    this.setState({\n      images: [],\n      searchQuery: searchQuery,\n      page: 1,\n      error: null,\n      showButton: false,\n    });\n\n  getImages = () => {\n    const { searchQuery, page } = this.state;\n    this.setState({ isLoading: true });\n\n    getImagesByQuery(searchQuery, page)\n      .then((images) => {\n        if (images.length === 0) {\n          this.setState({ showButton: false });\n          toast.error(\n            `Search result by \"${searchQuery}' not successful. Enter the correct query.`\n          );\n\n          return;\n        } else if (images.length !== 12) {\n          toast(\"Фото закончились\");\n          this.setState({ showButton: false });\n        }\n        this.setState((prevState) => ({\n          images: [...prevState.images, ...images],\n          page: prevState.page + 1,\n        }));\n      })\n\n      .catch((error) => toast(error))\n      .finally(() => {\n        this.scrollDown();\n        this.setState({ isLoading: false });\n      });\n  };\n\n  scrollDown = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  toggleModal = () =>\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n\n  modalImage = (largeImageURL) => {\n    this.setState({ largeImageURL });\n    this.toggleModal();\n  };\n\n  render() {\n    const { images, isLoading, showModal, largeImageURL, error, showButton } =\n      this.state;\n    return (\n      <div className={styles.App}>\n        <ToastContainer autoClose={3000} position=\"top-left\" />\n        <SearchBar onSubmit={this.onSubmit} />\n        {error && <p className={styles.Error}>{error}</p>}\n        {images && (\n          <div>\n            <ImageGallery images={images} modalImage={this.modalImage} />\n          </div>\n        )}\n        {isLoading && <LoaderSpiner />}\n        {showButton && !isLoading && <Button onClick={this.getImages} />}\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={largeImageURL} alt=\"\" />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}